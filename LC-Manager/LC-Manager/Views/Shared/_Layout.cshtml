<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>LC-Manager</title>
    <link rel="stylesheet" href="~/Content/animate.css">
    <link rel="stylesheet" href="~/Content/style.css">
    
    
    @*@Styles.Render("~/Content/css")*@
    @*@Scripts.Render("~/bundles/modernizr")*@
</head>
<body>
    <div class="main-flex">
        <aside class="aside">
            <div class="aside__fix">
                <div class="aside__head">«Пожалуйста»</div>
                <nav class="aside__links">
                    <ul class="aside__links-ul aside__links-ul_first">
                        <li class="@(ViewContext.RouteData.Values["Action"].ToString().ToLower() == "index" ? "active" : "")">
                            <a href="@Url.Action("Index", "Home")" class="aside-link">
                                <i class="icon-nav icon-nav_analytic"></i>
                                <span>Аналитика</span>
                            </a>
                        </li>
                        <li class='@(ViewContext.RouteData.Values["Action"].ToString().ToLower() == "sales" ? "active" : "")'>
                            <a href="@Url.Action("Sales", "Home")" class="aside-link">
                                <i class="icon-nav icon-nav_sell"></i>
                                <span>Продажи</span>
                            </a>
                        </li>
                        <li class='@(ViewContext.RouteData.Values["Action"].ToString().ToLower() == "clients" ? "active" : "")'>
                            <a href="@Url.Action("Clients", "Home")" class="aside-link">
                                <i class="icon-nav icon-nav_clients"></i>
                                <span>Клиенты</span>
                            </a>
                        </li>
                        <li>
                            <a href="" class="aside-link">
                                <i class="icon-nav icon-nav_message"></i>
                                <span>Рассылки</span>
                            </a>
                        </li>
                        <li>
                            <a href="" class="aside-link">
                                <i class="icon-nav icon-nav_action"></i>
                                <span>Акции</span>
                            </a>
                        </li>
                    </ul>
                    <ul class="aside__links-ul aside__links-ul_two">
                        <li>
                            <a href="" class="aside-link">
                                <i class="icon-nav icon-nav_setting"></i>
                                <span>Настройка ПЛ</span>
                            </a>
                        </li>
                        <li>
                            <a href="" class="aside-link">
                                <i class="icon-nav icon-nav_bux"></i>
                                <span>Бухгалтерия</span>
                            </a>
                        </li>
                    </ul>
                    <ul class="aside__links-ul aside__links-ul_three">
                        <li>
                            <a href="" class="aside-link">
                                <i class="icon-nav icon-nav_faq"></i>
                                <span>FAQ</span>
                            </a>
                        </li>
                        <li>
                            <a href="" class="aside-link">
                                <i class="icon-nav icon-nav_orders"></i>
                                <span>Мои заявки</span>
                            </a>
                        </li>
                        <li>
                            <a href="" class="aside-link">
                                <i class="icon-nav icon-nav_profile"></i>
                                <span>Профиль</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>        
        
            @RenderBody()        

        @*@Scripts.Render("~/bundles/jquery")*@
        @*@Scripts.Render("~/bundles/bootstrap")*@
        @RenderSection("scripts", required: false)
        </div>        
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.js"></script>
        <script type="text/javascript" src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>
        <script src="~/Scripts/app.js"></script>
        <script src="~/Scripts/jquery.nice-select.min.js"></script>
        <script src="~/Scripts/datepicker-ru.js"></script>
        <script src="~/Scripts/jquery.maskedinput.min.js"></script>       
        <script src="~/Scripts/jquery.dateFormat-1.0.js"></script>
        <script src="~/Scripts/main.js"></script>
        <script src="~/Scripts/tablegraph.js"></script>
        <script src="~/Scripts/jquery.knob.min.js"></script>

        <script type="text/javascript">
            //$( function() {
            //    $(".datepicker").datepicker();
            //} );

  	      //  $(".clear-date").click(function() {
         //                   $('#date2').val('');
         //               $('#date3').val('');
	        //});

	        $(document).ready(function(){
                $(".openstSales").on('click', 'div', function () {
                    $(this).toggleClass('opens');
                    $(this).next().toggleClass('open');
                });
            });

            $(document).ready(function () {
                $(".openst").on('click', '.client_table_item', function () {
                    if ($(this).next("div").is("openinnfo")) {
                        $(this).next("div").slideDown("slow");
                        $(this).removeClass('opens');
                    } else if ($(this).is(".opens")) {
                        $(this).next("div").slideToggle("slow");
                        $(this).removeClass('opens');
                    } else {
                        $(".openst .client_table_info").slideUp("slow");
                        $(this).next("div").slideToggle("slow");
                        $(".openst .client_table_item").removeClass('opens');
                        $(this).addClass('opens');
                    }
                });
            });

            $(".dial").knob();
            $({ animatedVal: 0 }).animate({ animatedVal: 70 }, {
                duration: 2000,
                easing: "swing",
                step: function () {
                    $(".dial").val(Math.ceil(this.animatedVal)).trigger("change");
                }
            });

            $(".actions-block").on('click', '.openblocklist', function () {
                var cilscrt = $(this).parent(1).prev('.actions-block-content')[0].scrollHeight;
                $(this).parent(1).parent(1).toggleClass("opens");
                $(this).parent(1).prev('.actions-block-content')[0].style.height = cilscrt + 'px';
                if (!$(this).parent(1).parent(1).hasClass("opens")) {
                    $(this).parent(1).prev('.actions-block-content')[0].style.height = '180px';
                }
            });
            
            $(".datepicker").datepicker();
            $(".clear-date").click(function () {
                $('#date2').val('');
                $('#date3').val('');
            });

            $(function () {
                $(".client_nav a").click(function (e) {
                    e.preventDefault();
                    var tab = $(".form-terminal__tabs-content > div");
                    var thisTab = $(this).attr('href');

                    tab.removeClass('active');
                    $(thisTab).addClass('active');

                    $(".client_nav div a").removeClass('this-p');
                    $(this).addClass('this-p');
                })
            });

            $("#Phone").mask("+7 (999) 999-99-99");

            $("#FriendPhone").mask("+7 (999) 999-99-99");

            $("#profilePhone").mask("+7 (999) 999-99-99");            

            $("#sendRegisterCode").click(function (e) {
                e.preventDefault();
                var phone = $("#Phone").val();
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("AjaxRegister", "Home")",
                    data: '{phone:\'' + phone + '\'}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function () {
                        console.log("send code");
                    }
                });
            });

            $("#searchClientPurchaseTerminal").click(function (e) {
                e.preventDefault();
                var clientinfo = $("#clientIdPurchaseTerminal").val();
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("SearchClient", "Home")",
                    data: '{searchClient: \'' + clientinfo + '\'}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (clientInfoResult) {
                        if (clientInfoResult.ErrorCode == 0 && clientInfoResult.Message == "") {
                            $("#profileName").val(clientInfoResult.Name);
                            $("#profileSurname").val(clientInfoResult.Surname);
                            document.getElementById("profilePatronymic").value = clientInfoResult.Patronymic;
                            document.getElementById("profileBirthDate").value = $.format.date(clientInfoResult.Birthdate, "dd.MM.yyyy");
                            $("#profilePhone").val(clientInfoResult.Phone).mask("+7 (999) 999-99-99");
                            $("#profileEmail").val(clientInfoResult.Email);
                            $("#profileCard").val(clientInfoResult.Card);
                            $("#profileBalance").val(clientInfoResult.FullBalance);
                            $("#profileLevel").val(clientInfoResult.Condition);
                            if (clientInfoResult.Gender == 1) {
                                $("#profileGender").val("1").niceSelect('update');
                            }
                            //document.getElementById("profileBirthDate").value = new Date(parseInt(clientInfoResult.Birthdate.substr(6)));
                        }
                    }
                })
            });

            $("#searchClientRefundTerminal").click(function (e) {
                e.preventDefault();
                var clientinfo = $("#clientIdRefundTerminal").val();
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("SearchClient", "Home")",
                    data: '{searchClient: \'' + clientinfo + '\'}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function () {
                        console.log("logging");
                    }
                })
            });
        </script>
</body>
</html>
